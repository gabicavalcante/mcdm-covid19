{
  
    
        "post0": {
            "title": "Country level",
            "content": "#hide_in %%shell pip install -U plotly pip install -U plotly-express pip install --upgrade Cython pip install --upgrade git+https://github.com/statsmodels/statsmodels . from mo_covid19.data import * . Filtering, renaming, and aggregating . Inspecting regions . fig = px.line(long_regions, x=&quot;date&quot;, y=&quot;value&quot;, color=&quot;category&quot;, labels=plotly_labels, color_discrete_sequence = colors_sequence_category, facet_col=&quot;locality_name&quot;, facet_col_wrap=2, height=800) fig.show() . . . Data preparation . Enriching with dates . date locality_name retail grocery_pharmacy parks transit_stations workplaces residential first_case_date restriction_date ease_restriction_date n_days_since_first_case n_days_since_restriction n_days_since_ease_restriction . 0 2020-02-15 | Lombardia | 3.076923 | -3.538462 | 42.307692 | 9.615385 | -1.076923 | -0.846154 | 2020-02-14 | 2020-02-23 | 2020-05-04 | 1 | -8 | -79 | . 1 2020-02-15 | New York | 9.096774 | -0.967742 | 16.892857 | 10.625000 | 0.387097 | -0.179487 | 2020-03-01 | 2020-03-15 | 2020-05-15 | -15 | -29 | -90 | . 2 2020-02-15 | Amazonas | -2.857143 | 5.750000 | -19.500000 | -5.333333 | 6.500000 | -1.000000 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -27 | -30 | -106 | . 3 2020-02-15 | São Paulo | 2.424528 | 1.944724 | 2.500000 | 1.007576 | 6.419355 | -0.676647 | 2020-02-26 | 2020-03-16 | 2020-06-01 | -11 | -30 | -107 | . 4 2020-02-15 | Île-de-France | -11.555556 | -10.444444 | 7.333333 | 3.222222 | -8.222222 | -1.222222 | 2020-01-23 | 2020-03-12 | 2020-05-11 | 23 | -26 | -86 | . (-120.0, 220.0) . Filtering using restriction dates (comment if you do not want to do this) . mês de fevereiro: mês atipico para os paises. possibilidade de usar ou não usar o mês de fevereiro. verificar a influencia disso na analise dos dados. | paramos de usar restrição de data nas regiões (que escolhemos) por causa da lombardia, e da data de inicio da coleta dos dados. | analisar se tiveram regiões que tomaram medidas de restrição antes do inicio da coleta dos dados. | . # data_period = data_by_days.query(&quot;n_days_since_restriction &gt;= -7 &amp; n_days_since_restriction &lt;= 50&quot;) . Inspecting . . . Centering the mean . calibrar as regiões (como a google fala) | . https://support.google.com/covid19-mobility/checklist/9834261?hl=pt-BR&amp;ref_topic=9822927 . locality_name category baseline_mean date first_case_date restriction_date ease_restriction_date n_days_since_first_case n_days_since_restriction n_days_since_ease_restriction value . 0 Amazonas | retail | 0.703413 | 2020-02-15 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -27 | -30 | -106 | -3.560556 | . 1 Amazonas | retail | 0.703413 | 2020-02-16 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -26 | -29 | -105 | -5.370079 | . 2 Amazonas | retail | 0.703413 | 2020-02-17 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -25 | -28 | -104 | 2.796587 | . 3 Amazonas | retail | 0.703413 | 2020-02-18 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -24 | -27 | -103 | 4.796587 | . 4 Amazonas | retail | 0.703413 | 2020-02-19 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -23 | -26 | -102 | -7.303413 | . Inspecting workplaces . Inspecting regions . . . Shift to positive . não influenciar no calculo da auc e media | ter um ponto de referência comum para o calcula auc | . category locality_name date first_case_date restriction_date ease_restriction_date n_days_since_first_case n_days_since_restriction n_days_since_ease_restriction grocery_pharmacy parks residential retail transit_stations workplaces . 0 Amazonas | 2020-02-15 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -27 | -30 | -106 | 115.230256 | 103.757637 | 110.125256 | 108.266368 | 103.813034 | 108.107361 | . 1 Amazonas | 2020-02-16 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -26 | -29 | -105 | 111.813590 | 102.543352 | 112.125256 | 106.456844 | 108.146368 | 101.607361 | . 2 Amazonas | 2020-02-17 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -25 | -28 | -104 | 109.480256 | 123.257637 | 110.375256 | 114.623510 | 109.479701 | 121.829583 | . 3 Amazonas | 2020-02-18 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -24 | -27 | -103 | 107.280256 | 119.007637 | 110.375256 | 116.623510 | 122.146368 | 121.718472 | . 4 Amazonas | 2020-02-19 | 2020-03-13 | 2020-03-16 | 2020-05-31 | -23 | -26 | -102 | 104.080256 | 111.757637 | 110.375256 | 104.523510 | 119.646368 | 120.496250 | . Inspecting workplaces . . . . . Inspecting regions . Seasonality . STL . extrair da tendencia ou amenizar a sazonaldade com a media movel | estramos querendo remover sazonalidade, usando dois metodos: stl: deveria isolar o ruido | media movel: remove a sazonalidade | . | . Inspecting workplaces . . . Inspecting regions . . . Rolling avg (7-day) . Inspecting workplaces . . . Inspecting regions . . . Gathering all the data . janela de dias: 0 a 50 | . Computing metrics . rank não se importa com o valor da redução, ele se importa com a frequência da redução. &quot;quem foi mais vezes bem sucedido&quot; e não &quot;por quanto foi bem sucedido&quot; | duas medidas parametricas e uma não (rank) | . For a single window . locality_name n_days_since_restriction category raw trend rollavg . 246 Lombardia | 0 | retail | 93.057692 | 100.546279 | 108.640110 | . 247 Lombardia | 0 | grocery_pharmacy | 122.615385 | 114.723866 | 113.780220 | . 248 Lombardia | 0 | parks | 101.307692 | 106.839176 | 107.153846 | . 249 Lombardia | 0 | transit_stations | 96.413462 | 91.459244 | 108.237637 | . 250 Lombardia | 0 | workplaces | 109.163462 | 102.137171 | 111.581044 | . ... ... | ... | ... | ... | ... | ... | . 2389 São Paulo | 49 | grocery_pharmacy | 99.872640 | 102.726109 | 97.473127 | . 2390 São Paulo | 49 | parks | 77.980310 | 78.209552 | 78.363070 | . 2391 São Paulo | 49 | transit_stations | 65.747592 | 64.892561 | 63.498957 | . 2392 São Paulo | 49 | workplaces | 83.163505 | 78.607534 | 75.416396 | . 2393 São Paulo | 49 | residential | 126.232208 | 126.911048 | 127.401679 | . 1500 rows × 6 columns . . . Inspecting categories . agg auc mean rank . metric raw rollavg trend raw rollavg trend raw rollavg trend . locality_name . Île-de-France 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | . Lombardia 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | . New York 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | . São Paulo 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | . Amazonas 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | . regiões . auc e mean tem resultados iguais. rank muda das outras medidas de agregamento somente no raw. | NY esta no ultimo em raw e trend (menos quando é no rank/raw), porém no rollavg ele troca com o Amazonas | . agg auc mean rank . metric raw rollavg trend raw rollavg trend raw rollavg trend . locality_name . Lombardia 1 | 2 | 1 | 1 | 2 | 1 | 2 | 2 | 2 | . Île-de-France 2 | 1 | 2 | 2 | 1 | 2 | 1 | 1 | 1 | . Amazonas 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | . São Paulo 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | . New York 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | . agg auc mean rank . metric raw rollavg trend raw rollavg trend raw rollavg trend . locality_name . Amazonas 4455.565897 | 4504.655183 | 4477.651070 | 91.350923 | 92.184352 | 91.693439 | 162.0 | 140.0 | 148.0 | . Lombardia 3805.346154 | 3959.912088 | 3784.170761 | 77.512308 | 80.963077 | 77.401843 | 114.0 | 118.0 | 111.0 | . New York 4768.812635 | 4850.637476 | 4771.220309 | 97.747342 | 99.261617 | 97.730099 | 195.0 | 214.0 | 214.0 | . São Paulo 4626.737175 | 4680.498404 | 4641.320726 | 94.664313 | 95.720506 | 94.982894 | 180.0 | 176.0 | 180.0 | . Île-de-France 3842.878205 | 3937.124237 | 3815.090103 | 79.018376 | 80.704090 | 78.292794 | 99.0 | 102.0 | 97.0 | . agg auc mean rank . metric raw rollavg trend raw rollavg trend raw rollavg trend . locality_name . Lombardia 1 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 2 | . Île-de-France 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | 2 | . Amazonas 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | 3 | . São Paulo 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | 4 | . New York 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | 5 | . For multiple windows . Inspecting categories . . . n_days_since_restriction category locality_name agg metric value . 0 0 days | grocery_pharmacy | Amazonas | mean | raw | 98.281923 | . 1 0 days | grocery_pharmacy | Lombardia | mean | raw | 109.061538 | . 2 0 days | grocery_pharmacy | New York | mean | raw | 112.354519 | . 3 0 days | grocery_pharmacy | São Paulo | mean | raw | 98.898764 | . 4 0 days | grocery_pharmacy | Île-de-France | mean | raw | 103.829487 | . ... ... | ... | ... | ... | ... | ... | . 1345 40 days | workplaces | Amazonas | auc | rollavg | 654.152935 | . 1346 40 days | workplaces | Lombardia | auc | rollavg | 388.432692 | . 1347 40 days | workplaces | New York | auc | rollavg | 622.775376 | . 1348 40 days | workplaces | São Paulo | auc | rollavg | 688.667587 | . 1349 40 days | workplaces | Île-de-France | auc | rollavg | 410.529609 | . 1350 rows × 6 columns . n_days_since_restriction locality_name agg metric value . 475 0 | Amazonas | rank | raw | 40.0 | . 476 0 | Lombardia | rank | raw | 33.0 | . 477 0 | New York | rank | raw | 24.0 | . 478 0 | São Paulo | rank | raw | 30.0 | . 479 0 | Île-de-France | rank | raw | 23.0 | . ... ... | ... | ... | ... | ... | . 895 40 | Amazonas | rank | rollavg | 40.0 | . 896 40 | Lombardia | rank | rollavg | 10.0 | . 897 40 | New York | rank | rollavg | 30.0 | . 898 40 | São Paulo | rank | rollavg | 50.0 | . 899 40 | Île-de-France | rank | rollavg | 20.0 | . 75 rows × 5 columns . paises . em todas as situações a Espanha é melhor que a Corea do Sul salvo em casos pontuais, analisando na janela de 10D usando rank conseguimos ver que a Corea do Sul fica melhor que a espanha (combinação entre preprocessamento, metrica e granularidade temporal) . | notar que quando trabalhamos com janela 50D perdemos a noção do comportamento no tempo . Espanha: começa mal, tem queda e consegue se manter. | Nova Zelandia: começa bem e piora. | . | observar espanha e alemanha (na janela que inicia em 0): ruido no dado original é observavel | no trend o ruido é amenizado (as duas começam em ponto proximo) | e no rollavg o efeito do ruido é potencializado (a diferença é maior que no raw) | . | . regiões . notar que quando trabalhamos com janela 50D perdemos a noção do comportamento no tempo Lombardia começa mal, tem queda e termina bem | NY começa &quot;bem&quot;, e piora | . | . . . para grocery pharmy o efeito tbm é observado: na janela zero paises como espanha e canada se tornam os piores segundo o rollavg. | . . . para parks temos um grupo bem claro a partir da janela 10D (argentina, nova zelandia e espanha). | o segundo grupo de paises é afetado por todos os fatores considerados. | .",
            "url": "https://gabicavalcante.github.io/mcdm-covid19/2020/08/26/MO-Covid19-Region.html",
            "relUrl": "/2020/08/26/MO-Covid19-Region.html",
            "date": " • Aug 26, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "This is where you put the contents of your About page. Like all your pages, it’s in Markdown format. . This website is powered by fastpages 1. . a blogging platform that natively supports Jupyter notebooks in addition to other formats. &#8617; . |",
          "url": "https://gabicavalcante.github.io/mcdm-covid19/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page10": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://gabicavalcante.github.io/mcdm-covid19/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}